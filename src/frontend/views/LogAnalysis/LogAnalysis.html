<!-- æ—¥å¿—åˆ†æé¡µé¢ -->
<div class="log-analysis-page" id="logAnalysisPage">
    <!-- é¡µé¢å¤´éƒ¨ -->
    <div class="page-header">
        <div class="header-content">
            <h1 class="page-title">æ—¥å¿—åˆ†æ</h1>
            <p class="page-desc">æ™ºèƒ½åˆ†æç³»ç»Ÿæ—¥å¿—ï¼Œå¿«é€Ÿå®šä½é—®é¢˜å’Œå¼‚å¸¸æ¨¡å¼</p>
        </div>
        <div class="header-actions">
            <button class="btn btn-secondary" id="exportLogsBtn">
                <i class="icon-download"></i>
                <span>å¯¼å‡ºæ—¥å¿—</span>
            </button>
            <button class="btn btn-primary" id="realTimeBtn">
                <i class="icon-play"></i>
                <span>å®æ—¶ç›‘æ§</span>
            </button>
        </div>
    </div>

    <!-- æ—¥å¿—ç»Ÿè®¡æ¦‚è§ˆ -->
    <div class="log-overview">
        <div class="overview-cards">
            <div class="overview-card total">
                <div class="card-icon">
                    <i class="icon-file-text"></i>
                </div>
                <div class="card-content">
                    <div class="card-value">1,234,567</div>
                    <div class="card-label">æ€»æ—¥å¿—æ¡æ•°</div>
                    <div class="card-trend up">
                        <i class="icon-arrow-up"></i>
                        <span>+12.5%</span>
                    </div>
                </div>
            </div>

            <div class="overview-card error">
                <div class="card-icon">
                    <i class="icon-alert-triangle"></i>
                </div>
                <div class="card-content">
                    <div class="card-value">1,245</div>
                    <div class="card-label">é”™è¯¯æ—¥å¿—</div>
                    <div class="card-trend up">
                        <i class="icon-arrow-up"></i>
                        <span>+8</span>
                    </div>
                </div>
            </div>

            <div class="overview-card warning">
                <div class="card-icon">
                    <i class="icon-warning"></i>
                </div>
                <div class="card-content">
                    <div class="card-value">3,456</div>
                    <div class="card-label">è­¦å‘Šæ—¥å¿—</div>
                    <div class="card-trend down">
                        <i class="icon-arrow-down"></i>
                        <span>-15</span>
                    </div>
                </div>
            </div>

            <div class="overview-card info">
                <div class="card-icon">
                    <i class="icon-info"></i>
                </div>
                <div class="card-content">
                    <div class="card-value">98.7%</div>
                    <div class="card-label">ç³»ç»Ÿå¯ç”¨æ€§</div>
                    <div class="card-trend up">
                        <i class="icon-arrow-up"></i>
                        <span>+0.2%</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ—¥å¿—æŸ¥è¯¢è¡¨å• -->
    <div class="log-query-section">
        <div class="query-header">
            <h2 class="section-title">æ—¥å¿—æŸ¥è¯¢</h2>
            <div class="query-actions">
                <button class="btn btn-secondary" id="saveQueryBtn">
                    <i class="icon-save"></i>
                    <span>ä¿å­˜æŸ¥è¯¢</span>
                </button>
                <button class="btn btn-secondary" id="loadQueryBtn">
                    <i class="icon-folder"></i>
                    <span>åŠ è½½æŸ¥è¯¢</span>
                </button>
            </div>
        </div>

        <div class="query-form">
            <!-- åŸºç¡€æŸ¥è¯¢æ¡ä»¶ -->
            <div class="query-row">
                <div class="query-group">
                    <label class="query-label">æ—¶é—´èŒƒå›´</label>
                    <div class="time-range-selector">
                        <select class="form-control" id="timeRangeType">
                            <option value="relative">ç›¸å¯¹æ—¶é—´</option>
                            <option value="absolute">ç»å¯¹æ—¶é—´</option>
                        </select>
                        <select class="form-control" id="relativeTime">
                            <option value="15m">æœ€è¿‘15åˆ†é’Ÿ</option>
                            <option value="1h">æœ€è¿‘1å°æ—¶</option>
                            <option value="6h">æœ€è¿‘6å°æ—¶</option>
                            <option value="24h" selected>æœ€è¿‘24å°æ—¶</option>
                            <option value="7d">æœ€è¿‘7å¤©</option>
                            <option value="30d">æœ€è¿‘30å¤©</option>
                        </select>
                        <div class="absolute-time" id="absoluteTime" style="display: none;">
                            <input type="datetime-local" class="form-control" id="startTime">
                            <span class="time-separator">è‡³</span>
                            <input type="datetime-local" class="form-control" id="endTime">
                        </div>
                    </div>
                </div>

                <div class="query-group">
                    <label class="query-label">æ—¥å¿—çº§åˆ«</label>
                    <div class="level-selector">
                        <label class="checkbox-item">
                            <input type="checkbox" value="ERROR" checked>
                            <span class="level-badge error">ERROR</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" value="WARN" checked>
                            <span class="level-badge warning">WARN</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" value="INFO" checked>
                            <span class="level-badge info">INFO</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" value="DEBUG">
                            <span class="level-badge debug">DEBUG</span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="query-row">
                <div class="query-group">
                    <label class="query-label">æœåŠ¡/æ¨¡å—</label>
                    <select class="form-control" id="serviceFilter" multiple>
                        <option value="user-service">ç”¨æˆ·æœåŠ¡</option>
                        <option value="order-service">è®¢å•æœåŠ¡</option>
                        <option value="payment-service">æ”¯ä»˜æœåŠ¡</option>
                        <option value="notification-service">é€šçŸ¥æœåŠ¡</option>
                        <option value="gateway">APIç½‘å…³</option>
                        <option value="database">æ•°æ®åº“</option>
                    </select>
                </div>

                <div class="query-group">
                    <label class="query-label">ä¸»æœº/èŠ‚ç‚¹</label>
                    <select class="form-control" id="hostFilter" multiple>
                        <option value="web-01">Web-Server-01</option>
                        <option value="web-02">Web-Server-02</option>
                        <option value="db-01">DB-Server-01</option>
                        <option value="cache-01">Cache-Server-01</option>
                        <option value="gateway-01">Gateway-01</option>
                    </select>
                </div>
            </div>

            <!-- é«˜çº§æŸ¥è¯¢æ¡ä»¶ -->
            <div class="advanced-query" id="advancedQuery">
                <div class="query-row">
                    <div class="query-group full-width">
                        <label class="query-label">å…³é”®è¯æœç´¢</label>
                        <div class="search-input-group">
                            <input type="text" class="form-control" placeholder="è¾“å…¥å…³é”®è¯ï¼Œæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼..." id="keywordSearch">
                            <div class="search-options">
                                <label class="checkbox-item">
                                    <input type="checkbox" id="regexMode">
                                    <span>æ­£åˆ™è¡¨è¾¾å¼</span>
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" id="caseSensitive">
                                    <span>åŒºåˆ†å¤§å°å†™</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="query-row">
                    <div class="query-group">
                        <label class="query-label">ç”¨æˆ·ID</label>
                        <input type="text" class="form-control" placeholder="è¾“å…¥ç”¨æˆ·ID..." id="userIdFilter">
                    </div>
                    <div class="query-group">
                        <label class="query-label">è¯·æ±‚ID</label>
                        <input type="text" class="form-control" placeholder="è¾“å…¥è¯·æ±‚ID..." id="requestIdFilter">
                    </div>
                    <div class="query-group">
                        <label class="query-label">IPåœ°å€</label>
                        <input type="text" class="form-control" placeholder="è¾“å…¥IPåœ°å€..." id="ipFilter">
                    </div>
                </div>
            </div>

            <div class="query-controls">
                <button class="btn btn-secondary" id="toggleAdvanced">
                    <i class="icon-settings"></i>
                    <span>é«˜çº§é€‰é¡¹</span>
                </button>
                <button class="btn btn-secondary" id="clearQuery">
                    <i class="icon-refresh"></i>
                    <span>æ¸…ç©ºæ¡ä»¶</span>
                </button>
                <button class="btn btn-primary" id="searchLogs">
                    <i class="icon-search"></i>
                    <span>æœç´¢æ—¥å¿—</span>
                </button>
            </div>
        </div>
    </div>

    <!-- æ—¥å¿—åˆ†æç»“æœ -->
    <div class="log-results-section">
        <!-- æ—¥å¿—ç»Ÿè®¡å›¾è¡¨ -->
        <div class="log-charts">
            <div class="chart-container">
                <div class="chart-header">
                    <h3 class="chart-title">æ—¥å¿—è¶‹åŠ¿åˆ†æ</h3>
                    <div class="chart-legend">
                        <div class="legend-item">
                            <span class="legend-color error"></span>
                            <span class="legend-text">é”™è¯¯</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color warning"></span>
                            <span class="legend-text">è­¦å‘Š</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color info"></span>
                            <span class="legend-text">ä¿¡æ¯</span>
                        </div>
                    </div>
                </div>
                <div class="chart-content">
                    <div id="logTrendChart" class="chart-placeholder">
                        <div class="chart-loading">
                            <div class="loading-spinner"></div>
                            <p>åŠ è½½å›¾è¡¨æ•°æ®ä¸­...</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-header">
                    <h3 class="chart-title">æœåŠ¡æ—¥å¿—åˆ†å¸ƒ</h3>
                </div>
                <div class="chart-content">
                    <div id="serviceDistributionChart" class="chart-placeholder">
                        <div class="chart-loading">
                            <div class="loading-spinner"></div>
                            <p>åŠ è½½å›¾è¡¨æ•°æ®ä¸­...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ—¥å¿—åˆ—è¡¨ -->
        <div class="log-list-container">
            <div class="list-header">
                <div class="list-info">
                    <h3 class="list-title">æ—¥å¿—åˆ—è¡¨</h3>
                    <span class="log-count">æ‰¾åˆ° 1,234 æ¡æ—¥å¿—</span>
                    <div class="search-status">
                        <span class="status-text">æœç´¢å®Œæˆ</span>
                        <span class="search-time">è€—æ—¶ 0.5s</span>
                    </div>
                </div>
                <div class="list-controls">
                    <div class="display-options">
                        <label class="checkbox-item">
                            <input type="checkbox" id="showTimestamp" checked>
                            <span>æ˜¾ç¤ºæ—¶é—´æˆ³</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" id="showLevel" checked>
                            <span>æ˜¾ç¤ºçº§åˆ«</span>
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" id="showSource" checked>
                            <span>æ˜¾ç¤ºæ¥æº</span>
                        </label>
                    </div>
                    <div class="view-controls">
                        <select class="form-control" id="pageSize">
                            <option value="50">50æ¡/é¡µ</option>
                            <option value="100" selected>100æ¡/é¡µ</option>
                            <option value="200">200æ¡/é¡µ</option>
                        </select>
                        <button class="btn btn-secondary" id="autoRefresh">
                            <i class="icon-refresh"></i>
                            <span>è‡ªåŠ¨åˆ·æ–°</span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="log-list" id="logList">
                <!-- æ—¥å¿—æ¡ç›® -->
                <div class="log-entry error" data-log-id="log-001">
                    <div class="log-header">
                        <span class="log-timestamp">2024-01-15 14:32:15.123</span>
                        <span class="log-level error">ERROR</span>
                        <span class="log-source">user-service</span>
                        <span class="log-host">web-server-01</span>
                    </div>
                    <div class="log-content">
                        <div class="log-message">
                            Database connection failed: Connection timeout after 30 seconds
                        </div>
                        <div class="log-details">
                            <span class="log-detail-item">
                                <strong>Request ID:</strong> req-12345-abcde
                            </span>
                            <span class="log-detail-item">
                                <strong>User ID:</strong> user-67890
                            </span>
                            <span class="log-detail-item">
                                <strong>IP:</strong> 192.168.1.100
                            </span>
                        </div>
                    </div>
                    <div class="log-actions">
                        <button class="action-btn" title="æŸ¥çœ‹ä¸Šä¸‹æ–‡" onclick="showLogContext('log-001')">
                            <i class="icon-context"></i>
                        </button>
                        <button class="action-btn" title="æ·»åŠ åˆ°æ•…éšœ" onclick="addToFault('log-001')">
                            <i class="icon-plus-circle"></i>
                        </button>
                        <button class="action-btn" title="å¤åˆ¶æ—¥å¿—" onclick="copyLog('log-001')">
                            <i class="icon-copy"></i>
                        </button>
                    </div>
                </div>

                <div class="log-entry warning" data-log-id="log-002">
                    <div class="log-header">
                        <span class="log-timestamp">2024-01-15 14:31:45.567</span>
                        <span class="log-level warning">WARN</span>
                        <span class="log-source">order-service</span>
                        <span class="log-host">web-server-02</span>
                    </div>
                    <div class="log-content">
                        <div class="log-message">
                            High memory usage detected: 85% of available memory in use
                        </div>
                        <div class="log-details">
                            <span class="log-detail-item">
                                <strong>Memory Usage:</strong> 6.8GB / 8GB
                            </span>
                            <span class="log-detail-item">
                                <strong>Process:</strong> order-processor
                            </span>
                        </div>
                    </div>
                    <div class="log-actions">
                        <button class="action-btn" title="æŸ¥çœ‹ä¸Šä¸‹æ–‡" onclick="showLogContext('log-002')">
                            <i class="icon-context"></i>
                        </button>
                        <button class="action-btn" title="æ·»åŠ åˆ°æ•…éšœ" onclick="addToFault('log-002')">
                            <i class="icon-plus-circle"></i>
                        </button>
                        <button class="action-btn" title="å¤åˆ¶æ—¥å¿—" onclick="copyLog('log-002')">
                            <i class="icon-copy"></i>
                        </button>
                    </div>
                </div>

                <div class="log-entry info" data-log-id="log-003">
                    <div class="log-header">
                        <span class="log-timestamp">2024-01-15 14:31:30.890</span>
                        <span class="log-level info">INFO</span>
                        <span class="log-source">gateway</span>
                        <span class="log-host">gateway-01</span>
                    </div>
                    <div class="log-content">
                        <div class="log-message">
                            User authentication successful
                        </div>
                        <div class="log-details">
                            <span class="log-detail-item">
                                <strong>User ID:</strong> user-12345
                            </span>
                            <span class="log-detail-item">
                                <strong>Session ID:</strong> sess-abcde-12345
                            </span>
                            <span class="log-detail-item">
                                <strong>IP:</strong> 192.168.1.105
                            </span>
                        </div>
                    </div>
                    <div class="log-actions">
                        <button class="action-btn" title="æŸ¥çœ‹ä¸Šä¸‹æ–‡" onclick="showLogContext('log-003')">
                            <i class="icon-context"></i>
                        </button>
                        <button class="action-btn" title="æ·»åŠ åˆ°æ•…éšœ" onclick="addToFault('log-003')">
                            <i class="icon-plus-circle"></i>
                        </button>
                        <button class="action-btn" title="å¤åˆ¶æ—¥å¿—" onclick="copyLog('log-003')">
                            <i class="icon-copy"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- åˆ†é¡µæ§ä»¶ -->
            <div class="pagination-container">
                <div class="pagination-info">
                    <span>æ˜¾ç¤º 1-100 æ¡ï¼Œå…± 1,234 æ¡æ—¥å¿—</span>
                </div>
                <div class="pagination-controls">
                    <button class="page-btn" disabled>
                        <i class="icon-chevron-left"></i>
                    </button>
                    <button class="page-btn active">1</button>
                    <button class="page-btn">2</button>
                    <button class="page-btn">3</button>
                    <span class="page-dots">...</span>
                    <button class="page-btn">13</button>
                    <button class="page-btn">
                        <i class="icon-chevron-right"></i>
                    </button>
                </div>
                <div class="jump-to-page">
                    <span>è·³è½¬åˆ°</span>
                    <input type="number" class="form-control" min="1" max="13" value="1">
                    <span>é¡µ</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- æ—¥å¿—åˆ†æé¡µé¢å›¾æ ‡æ ·å¼ -->
<style>
/* æ—¥å¿—åˆ†æé¡µé¢å›¾æ ‡ */
.icon-file-text::before {
    content: "ğŸ“„";
    font-size: 20px;
}

.icon-alert-triangle::before {
    content: "âš ï¸";
    font-size: 20px;
}

.icon-warning::before {
    content: "ğŸŸ¡";
    font-size: 20px;
}

.icon-info::before {
    content: "â„¹ï¸";
    font-size: 20px;
}

.icon-download::before {
    content: "â¬‡ï¸";
    font-size: 14px;
}

.icon-play::before {
    content: "â–¶ï¸";
    font-size: 14px;
}

.icon-save::before {
    content: "ğŸ’¾";
    font-size: 14px;
}

.icon-folder::before {
    content: "ğŸ“";
    font-size: 14px;
}

.icon-settings::before {
    content: "âš™ï¸";
    font-size: 14px;
}

.icon-search::before {
    content: "ğŸ”";
    font-size: 14px;
}

.icon-refresh::before {
    content: "ğŸ”„";
    font-size: 14px;
}

.icon-context::before {
    content: "ğŸ“‹";
    font-size: 14px;
}

.icon-plus-circle::before {
    content: "â•";
    font-size: 14px;
}

.icon-copy::before {
    content: "ğŸ“‹";
    font-size: 14px;
}

.icon-chevron-left::before {
    content: "â—€";
    font-size: 12px;
}

.icon-chevron-right::before {
    content: "â–¶";
    font-size: 12px;
}

.icon-arrow-up::before {
    content: "â†—ï¸";
    font-size: 12px;
}

.icon-arrow-down::before {
    content: "â†˜ï¸";
    font-size: 12px;
}
</style>