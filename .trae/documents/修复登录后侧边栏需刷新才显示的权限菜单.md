## 问题诊断
- 根因：在组件内把基于 Pinia 的权限标识用“普通常量”缓存，未保持响应式。
- 证据：
  - Sidebar：`const isAdmin = auth.role === 'admin'`（首次渲染后不再随 `auth.role` 变化）
  - HeaderNav：`const authed = auth.isAuthenticated`（同样非响应式，登录后不更新）
- 现象：登录后需要浏览器刷新，组件被重新创建，常量重新计算，菜单才出现。

## 修复方案
### 1. Sidebar.vue 保持响应式
- 使用 `storeToRefs(auth)` 或 `computed`：
  - `const { role } = storeToRefs(auth)`
  - `const isAdmin = computed(() => role.value === 'admin')`
- 模板改为：`v-if="isAdmin"`（或 `v-if="role === 'admin'"` 结合 `role` 引用）

### 2. HeaderNav.vue 保持响应式
- 使用 `storeToRefs(auth)` 获取 `isAuthenticated` 和 `role`：
  - `const { isAuthenticated, role } = storeToRefs(auth)`
  - `const authed = isAuthenticated` 或 `computed(() => isAuthenticated.value)`
- `can()` 改为基于 `role.value`：`return roles.includes(role.value || '')`
- 保留或上移 `auth.restore()` 到应用入口（可选，见下一节）

### 3. 可选增强
- 在 `src/app/main.ts` 应用初始化后调用一次 `auth.restore()`，保证刷新后也能立即回显登录态。
- 抽取通用权限判断工具：`useCan(roles)`，减少重复逻辑，统一响应式来源。

## 验证步骤
- 启动前端并设置有效的后端地址（`VITE_API_TARGET`）。
- 登录为 admin：无需刷新即可看到侧边栏的“用户管理/角色分配/权限策略/审计日志”。
- 切换角色或登出：对应菜单即时隐藏；检查 Header 的用户菜单 `v-if` 也能及时切换。
- 路由守卫仍按原有逻辑工作（未认证跳转登录，角色不符跳转默认页）。

## 变更范围
- `frontend-vue/src/app/components/Sidebar.vue`
- `frontend-vue/src/app/components/HeaderNav.vue`
- （可选）`frontend-vue/src/app/main.ts` 添加一次 `auth.restore()`

请确认是否按以上方案修改；确认后我将直接完成代码调整并推送到 `develop` 分支，随后进行联调验证。