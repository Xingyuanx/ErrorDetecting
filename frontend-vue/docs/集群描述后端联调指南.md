# 集群描述字段 (description) 后端联调指南

本指南旨在说明前端 `frontend-vue` 中新增的“集群描述”输入框如何与后端 API 进行对接。

## 1. 前端实现细节

### 数据绑定
- **文件**: `src/app/views/ClusterList.vue`
- **变量名**: `description` (响应式字符串 `ref('')`)
- **HTML 元素**:
  ```html
  <input v-model.trim="description" placeholder="集群描述 (可选)" class="header__search-input" />
  ```

## 2. 接口通信协议

### 注册集群 (Create Cluster)
- **请求方法**: `POST`
- **请求路径**: `/api/v1/clusters`
- **数据格式**: `application/json`
- **Payload 结构**:
  前端在提交注册时，会将描述信息放在 JSON 对象的顶层。
  ```json
  {
    "name": "集群名称",
    "type": "hadoop",
    "node_count": 3,
    "health_status": "healthy",
    "description": "这是用户填写的集群描述内容",  // <-- 关键字段
    "namenode_ip": "...",
    "nodes": [ ... ]
  }
  ```

### 获取列表 (Get Clusters)
- **请求方法**: `GET`
- **请求路径**: `/api/v1/clusters`
- **后端预期返回**:
  后端在返回集群列表时，应包含 `description` 字段。前端目前虽主要展示名称和状态，但该字段已在数据模型中预留。

## 3. 联调验证步骤

1. **前端输入**: 在“注册新集群”表单的“集群描述”框中输入测试文本（例如：`Test Description 123`）。
2. **抓包检查**: 
   - 打开浏览器开发者工具 (F12) -> Network 标签。
   - 点击“提交注册”。
   - 检查名为 `clusters` 的 `POST` 请求，确认 `Payload` 中包含 `description` 字段且值正确。
3. **数据库校验**: 登录后端数据库，检查 `clusters` 表中对应记录的 `description` 列是否成功存入该字符串。
4. **接口回显**: 调用 `GET /api/v1/clusters`，确认返回的 JSON 数据中包含存入的描述内容。

## 4. 后端注意事项
- **字段类型**: 建议使用 `TEXT` 或 `VARCHAR(255)`。
- **可选性**: 前端已标记为“可选”，后端应允许该字段为 `NULL` 或空字符串。
