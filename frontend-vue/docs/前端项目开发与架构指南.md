# 🚀 前端项目开发与架构指南 (零基础全通关版)

> **写给小组伙伴们**：无论你是产品经理、UI 设计师、测试工程师还是运维同事，这份文档都是为你量身定制的。我们的目标是：看完这份文档，你能像开发者一样理解这个项目的每一个转轴是如何转动的。

---

## 目录

1. [🌍 宏观视角：网页是怎么跑起来的？](#1-宏观视角网页是怎么跑起来的)
2. [📦 我们的工具箱：技术名词大白话](#2-我们的工具箱技术名词大白话)
3. [🗺️ 职责地图：屏幕上的内容在哪里改？](#3-职责地图屏幕上的内容在哪里改)
4. [🔄 业务全流程：从点击到结果发生了什么？](#4-业务全流程从点击到结果发生了什么)
5. [� 核心功能细节深挖 (必读)](#5-核心功能细节深挖-必读)
6. [�🛠️ 非开发者调试秘籍：如何优雅地提 Bug？](#6-非开发者调试秘籍如何优雅地提-bug)
7. [🎨 协作指南：不同角色如何参与？](#7-协作指南不同角色如何参与)

---

## 1. 🌍 宏观视角：网页是怎么跑起来的？

想象你在网上订餐：

1. **你（浏览器）**：输入网址，发出“我想看网页”的请求。
2. **快递员（网络/Vite）**：把我们写好的代码打包成一个个小包裹，送到你的浏览器里。
3. **装修队（前端代码）**：浏览器收到包裹后，按照代码的指示，把文字、图片、按钮摆好。
4. **服务员（API 接口）**：你想看集群数据时，前端会问后端要数据，后端把数据装在盒子里（JSON 格式）传回来，前端再把它拆开摆在表格里。

---

## 2. 📦 我们的工具箱：技术名词大白话

| 技术名词         | 它的角色 | 形象理解                                                                             |
| :--------------- | :------- | :----------------------------------------------------------------------------------- | ------------------------------------------------ |
| **Vue 3**        | 核心框架 | **乐高底板**：所有的组件（方块）都插在它上面，它负责感应方块的变化并自动更新。       |
| **TypeScript**   | 语言规范 | **施工监理**：在盖房子前检查每个零件的尺寸，尺寸不对（类型错误）直接停工，避免塌方。 |
| **Element Plus** | 组件库   | **精装房样板间**：提供现成的马桶、洗手盆（按钮、输入框），我们直接搬来用。           |
| **Pinia**        | 状态管理 | **全家共享记事本**                                                                   | 记录用户是谁、有没有登录，所有页面都能随时翻看。 |
| **Vite**         | 构建工具 | **极速快递流水线**                                                                   | 负责把我们的源代码瞬间变成浏览器能跑的程序。     |

---

## 3. 🗺️ 职责地图：屏幕上的内容在哪里改？

### A. 全局大框架 (外壳)

- **侧边栏 (导航菜单)**: [Sidebar.vue](file:///home/devbox/project/frontend-vue/src/app/components/Sidebar.vue) —— 负责切换页面。
- **顶部条 (面包屑/用户头像)**: [HeaderNav.vue](file:///home/devbox/project/frontend-vue/src/app/components/HeaderNav.vue) —— 负责显示你当前在哪里。
- **背景与整体布局**: [App.vue](file:///home/devbox/project/frontend-vue/src/app/App.vue) —— 负责整体的“骨架”。

### B. 具体的业务内容 (内页)

- **登录/注册**: [Login.vue](file:///home/devbox/project/frontend-vue/src/app/views/Login.vue) —— 处理“我是谁”的问题。
- **智能诊断区**: [Diagnosis.vue](file:///home/devbox/project/frontend-vue/src/app/views/Diagnosis.vue) —— 核心功能，左边选节点，右边聊天。
- **数据大屏**: [Dashboard.vue](file:///home/devbox/project/frontend-vue/src/app/views/Dashboard.vue) —— 满屏图表的地方。

### C. 视觉皮肤 (样式)

- **配色与间距**: [theme.scss](file:///home/devbox/project/frontend-vue/src/app/styles/theme.scss) —— 如果觉得蓝色太浅了，改这里。

---

## 4. 🔄 业务全流程：从点击到结果发生了什么？

以**“用户在 AI 诊断助手里发了一句话”**为例：

1. **触发**: 用户在 [DiagnosisChatPanel.vue](file:///home/devbox/project/frontend-vue/src/app/components/DiagnosisChatPanel.vue) 输入框打字并点发送。
2. **记录**: 前端先在自己的“小本子”里记下这句话，并立刻显示在屏幕上（让你觉得反应很快）。
3. **求助**: 前端通过 [diagnosis.service.ts](file:///home/devbox/project/frontend-vue/src/app/api/diagnosis.service.ts) 向后端发送请求。
4. **等待**: 后端 AI 开始思考，通过 **SSE (流式传输)** 把字一个一个吐回来。
5. **渲染**: 前端收到一个字，就更新一次屏幕，形成“打字机”效果。

---

## 5. 💎 核心功能细节深挖 (必读)

### 5.1 智能诊断助手的“大脑开关”

在 [DiagnosisChatPanel.vue](file:///home/devbox/project/frontend-vue/src/app/components/DiagnosisChatPanel.vue) 中，有几个关键细节：

- **模型切换**: 用户可以选择 DeepSeek-V3 或 R1。R1 模型会额外多出一个“推理过程”展示。
- **搜索与操作开关**: 这是给 AI 插件的指令。如果勾选了“搜索”，AI 就会去联网查资料；如果勾选了“操作”，AI 就能直接执行集群修复命令。
- **深度诊断**: 这不是简单的聊天，它会触发后端一套复杂的“健康检查”工作流。

### 5.2 身份识别与“自动续期”

我们在 [api.ts](file:///home/devbox/project/frontend-vue/src/app/lib/api.ts) 里做了一件非常聪明的事：

- **身份证 (Token)**: 你登录后，后端会给你一张通行证。
- **悄悄换新**: 通行证通常只有几小时有效期。为了不让用户在操作时突然被踢出去，我们在通行证快过期时，会背着用户悄悄去后端换一张新的。这个过程用户完全感知不到，这就是“无感刷新”。

### 5.3 响应式布局的“伸缩魔术”

在 [Diagnosis.vue](file:///home/devbox/project/frontend-vue/src/app/views/Diagnosis.vue) 中：

- **可拖拽分栏**: 页面左侧选节点，右侧聊天，中间的分割线是可以左右拖动的。这是由 [SplitPane.vue](file:///home/devbox/project/frontend-vue/src/app/components/SplitPane.vue) 组件控制的。
- **手机模式**: 当屏幕宽度变窄时，左右分栏会变成上下分栏，侧边栏会自动藏起来，变成一个可以点击弹出的“汉堡菜单”。

### 5.4 权限的“分级可见”

我们在 [router/index.ts](file:///home/devbox/project/frontend-vue/src/app/router/index.ts) 里规定了谁能看什么：

- **Admin (管理员)**: 能看到左侧菜单底部的“用户管理”和“操作日志”。
- **Operator (操作员)**: 只能看到诊断和集群列表。
- **如果强行输入网址**: 比如一个普通用户强行在地址栏输入 `/user-management`，系统会自动把他弹回首页，确保安全。

---

## 6. 🛠️ 非开发者调试秘籍：如何优雅地提 Bug？

当页面出问题时，你可以打开浏览器的“开发者工具”（按 F12）：

1. **网络 (Network) 选项卡**:
   - 看到**红色的请求**？那是接口挂了，找后端同学。
   - 请求耗时太长（几千毫秒）？那是服务器太慢了。
2. **控制台 (Console) 选项卡**:
   - 满屏红色的英文报错？那是前端代码有 Bug，截图发给开发。
3. **应用 (Application) -> Local Storage**:
   - 这里存着你的身份信息。如果登录死活不进去，试着右键点击“Clear”清空这里再刷新。

---

## 7. 🎨 协作指南：不同角色如何参与？

### 🙋 产品经理 (PM)

- **关注点**: 页面文案是否正确？逻辑是否顺畅？
- **如何改**: 所有的文案都在 [views/](file:///home/devbox/project/frontend-vue/src/app/views/) 的 `.vue` 文件里的 `<template>` 标签内。

### 🎨 设计师 (UI/UX)

- **关注点**: 颜色、圆角、阴影是否对齐设计稿？
- **如何改**: 检查 [theme.scss](file:///home/devbox/project/frontend-vue/src/app/styles/theme.scss) 中的变量。我们使用了 CSS 变量，改一处，全站变。

### 🛡️ 测试工程师 (QA)

- **关注点**: 异常流程是否处理？(比如断网了会显示什么？)
- **工具**: 我们的自动化测试脚本在 [e2e/](file:///home/devbox/project/frontend-vue/e2e/)。你可以看这里的脚本来理解业务路径。

---

## 8. 常见问题 (FAQ)

**Q: 为什么我改了代码界面没变化？**
A: 检查你是否保存了文件，或者 Vite 的热更新是否因为报错停掉了（看命令行窗口）。

**Q: 为什么 AI 说话断断续续的？**
A: 这是正常的！这就是“流式传输”，为了让你尽快看到内容。

**Q: 为什么有些页面我进去是空白？**
A: 很有可能是你的角色（Role）权限不够，或者后端接口在这个环境没部署。

---

> **结语**：前端不是黑盒，它是由逻辑、样式和数据搭建起来的乐高城堡。希望这份指南能帮你成为城堡的共同建设者！
