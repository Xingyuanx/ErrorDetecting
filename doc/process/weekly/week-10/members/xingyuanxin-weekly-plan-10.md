# 邢远鑫第10周详细工作计划

## 基本信息
- **姓名**: 邢远鑫  
- **计划周期**: 第10周（2025-11-24 至 2025-11-30）  
- **项目**: 大模型数据平台故障检测项目  
- **计划制定时间**: 2025-11-24  
- **工作时间**: 每天20:00-21:30（1.5小时/天，共10.5小时）

## 本周核心目标

### 主要任务概览
本周采用“**联调完善（前3天） + 稳定优化（后4天）**”两阶段模式，围绕前端与后端的接口联调、权限与实时能力完善、封装与测试补齐，形成稳定可复用的接口层。

### 核心目标
1. **实时指标联调（SSE/WS）**：完成连接管理、断线重连与心跳机制，适配图表渲染数据结构
2. **日志下载权限打通**：完善 `Authorization` 流程与后端校验，覆盖边界场景
3. **诊断/修复完整闭环**：补齐触发、状态流转与结果展示的端到端流程
4. **错误码与字段统一**：封装层映射与团队口径一致；补充单元测试
5. **文档与集合更新**：同步接口文档与 Postman 集合，确保多人协作一致性

### 质量目标
- 可用性：实时指标连接稳定（自动重连 ≤3 次）、日志下载无权限异常  
- 一致性：错误码与字段统一映射，前后端口径一致  
- 可维护性：封装清晰、单元测试覆盖关键路径、文档完备

---

## 周一（2025-11-24）
**主题：Metrics 实时（SSE/WS）联调**

### 20:00-21:30：连接管理与数据适配
- **任务**：完成 SSE/WS 握手、断线重连与心跳；统一事件数据结构供前端图表使用（ECharts）
- **方法**：封装连接管理器（状态回调、重连退避、异常提示）；定义 `onOpen/onMessage/onError/onClose` 钩子
- **产出**：实时指标联调示例与连接稳定性记录（延迟与丢包率）

---

## 周二（2025-11-25）
**主题：日志下载权限与边界场景**

### 20:00-21:30：下载流程打通与异常处理
- **任务**：完善 `Authorization` Header、Token 过期处理；支持按条件下载与断点续传（若后端支持）
- **方法**：统一下载接口封装，异常场景（权限拒绝/资源不存在/网络中断）用户提示与重试策略
- **产出**：下载接口调用示例、权限校验通过记录、边界用例清单

---

## 周三（2025-11-26）
**主题：Diagnosis/Repair 流程闭环**

### 20:00-21:30：端到端流程与状态机
- **任务**：补齐触发→执行→状态查询→结果展示全流程；定义前端状态机与失败重试策略
- **方法**：标准化响应 `{code,msg,data}` 的状态字段；封装轮询与取消机制，记录错误码与提示语口径
- **产出**：流程演示与问题清单、接口对接文档更新

---

## 周四（2025-11-27）
**主题：错误码与字段统一 + 单元测试**

### 20:00-21:30：封装层映射与测试补齐
- **任务**：建立错误码映射表；为幂等接口补充退避重试测试；覆盖超时与异常提示
- **方法**：针对 Auth/Cluster/Logs/Metrics/Diagnosis/Repair 关键路径编写测试用例，使用模拟响应与超时场景
- **产出**：错误码映射表与单元测试报告、封装层稳定性评估

---

## 周五（2025-11-28）
**主题：封装与前端适配优化**

### 20:00-21:30：接口封装与页面适配
- **任务**：优化统一响应处理、重试与提示策略；完善前端组件的数据适配（图表/列表/分页）
- **方法**：抽象常用调用模式（查询/触发/下载/流式），减少重复逻辑；统一 Loading/Empty/Error 态表现
- **产出**：封装改进记录与适配示例、用户体验优化清单

---

## 周六（2025-11-29）
**主题：Postman 集合与文档同步**

### 20:00-21:30：集合维护与对齐
- **任务**：更新集合（Auth/Cluster/Logs/Metrics/Diagnosis/Repair）；维护环境变量；补充示例与断言
- **方法**：为关键接口添加响应断言与脚本；导出集合与环境文件，供团队共享
- **产出**：最新集合与环境文件、接口文档更新（`doc/api/fronted-interface.md`）

---

## 周日（2025-11-30）
**主题：联调验证与周总结**

### 20:00-21:30：端到端验证与复盘
- **任务**：执行核心路径联调（Auth→Cluster→Logs→Metrics→Diagnosis/Repair）；汇总问题与解决方案
- **方法**：记录延迟与错误率，检查权限与错误码一致性；完善下周改进方向
- **产出**：联调报告与问题清单、周总结草稿（关键结论与后续计划）

---

## 风险评估与应对策略
- **实时连接不稳定**：启用断线重连与心跳、前端状态提示；记录重连次数与阈值  
- **权限与错误码不一致**：建立映射与变更记录，周四统一口径并测试  
- **时间不足**：优先完成核心闭环（Metrics/Logs 下载/Diagnosis/Repair），非核心适配延后

## 学习资源与参考资料
- 项目文档：`doc/api/fronted-interface.md`  
- Postman 官方文档与集合脚本示例  
- SSE/WS 前端实现实践文章与库参考（仅作方法论，不引入新库）

## 预期成果与交付物

### 主要交付物
| 类别 | 交付物 | 具体内容 |
|------|--------|----------|
| **接口封装** | API 封装与单元测试 | 响应处理/错误码映射/超时重试/实时连接管理 |
| **接口实现** | 前端对接代码 | Metrics/Logs 下载/Diagnosis/Repair 全流程联调 |
| **文档与集合** | 对接文档与 Postman | 最新接口文档、集合与环境文件、断言脚本 |

### 质量标准
- 可用性：调用稳定可靠，实时与下载场景错误提示清晰  
- 可维护性：封装清晰、测试覆盖关键路径、文档完备  
- 一致性：字段与状态码口径统一，团队协作无歧义

---
**计划制定时间**: 2025-11-24  
**计划执行周期**: 2025-11-24 至 2025-11-30  
**个人目标**: 完成接口层的实时能力与权限闭环，统一错误码口径，形成可复用的封装与文档产出
