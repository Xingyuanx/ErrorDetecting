# 邹佳轩第 14 周学习总结

第 14 周（2025-12-22 至 2025-12-28）

## 本周完成情况概览

### 已完成内容

1.  **监控体系搭建（12/22）**
    - 部署 Prometheus 与 Grafana 容器，配置持久化存储
    - 集成 `node_exporter` 采集主机指标，`cadvisor` 采集容器资源指标
    - 接入 `postgres_exporter` 与 `redis_exporter`，实现中间件深度监控
    - 交付物：监控服务 Compose 配置、Grafana 数据源配置

2.  **可视化仪表盘配置（12/23）**
    - 导入并定制 PostgreSQL 性能监控大屏（QPS、连接数、缓存命中率、死锁）
    - 搭建系统资源概览面板，实时展示 CPU、内存、磁盘 I/O 水位
    - 配置基础告警规则（如 CPU > 80%），验证告警触发与恢复
    - 涉及文件：Grafana Dashboards JSON 导出文件

3.  **数据库高可用探索（12/24）**
    - 调研 PostgreSQL 高可用方案（Patroni vs Repmgr vs Pgpool-II）
    - 在测试环境搭建基于 Repmgr 的主从复制集群
    - 模拟主节点宕机，验证从节点自动提升（Failover）流程
    - 输出《PostgreSQL 高可用方案选型与测试报告》

4.  **日志与监控联动（12/25）**
    - 配合 Flume 团队，将容器标准输出日志重定向至日志收集端
    - 尝试在 Grafana 中集成 Loki（轻量级日志系统），实现指标与日志的同屏关联

### 部分完成/待完善内容

1.  高可用方案的 VIP（虚拟 IP）漂移在容器网络中实现较复杂，目前仍依赖客户端重连
2.  告警通知渠道目前仅支持邮件，尚未接入钉钉/企业微信 Webhook
3.  Flume 自身的监控指标尚未完全接入 Prometheus

### 各领域掌握程度评估

#### 可观测性（Observability）

- 掌握状态：掌握监控数据的采集、存储与可视化链路
- 具体表现：独立搭建全栈监控平台，覆盖基础设施与中间件
- 能力描述：具备构建系统级“仪表盘”的能力，能通过指标快速发现隐患

#### 数据库高可用

- 掌握状态：理解主从复制与故障转移的核心原理
- 具体表现：成功搭建并验证主从切换流程
- 能力描述：能够设计具备一定容灾能力的数据库架构

## 问题分析与反思

### 主要收益

1.  系统运行状态透明化，不再“盲人摸象”
2.  通过压力测试配合监控观察，发现了数据库连接池配置过小的瓶颈
3.  高可用演练暴露了应用层重连机制的缺陷，倒逼代码优化

### 存在不足与改进方向

1.  监控数据保留策略未配置，长期运行可能占用过多磁盘
2.  告警规则存在误报（Flapping），需优化阈值与持续时间窗口
3.  高可用架构增加了运维复杂度，需编写自动化维护脚本

## 下周重点与计划

1.  深入研究 AI Agent 技术栈，部署本地大语言模型（如 Llama/Qwen）
2.  探索 LangChain 框架，尝试构建基于文档的问答助手（RAG）
3.  配合后端开发，设计 AI 诊断接口，实现“日志 -> 诊断建议”的初步闭环



