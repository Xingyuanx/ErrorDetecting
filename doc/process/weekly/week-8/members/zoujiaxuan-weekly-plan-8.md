# 邹佳轩第8周详细工作计划

## 基本信息
- **姓名**: 邹佳轩  
- **计划周期**: 第8周（2025-11-10 至 2025-11-16）  
- **项目**: 基于Hadoop的故障检测与自动恢复项目  
- **计划制定时间**: 2025-11-10  
- **工作时间**: 每天20:00-21:30（1.5小时/天，共10.5小时）

## 本周核心目标（第五层：应用服务层）
- 技术栈聚焦：**FastAPI 后端 | RESTful API | Python**

### 主要任务概览
本周核心任务是完成后端应用服务层的最小可用闭环：从接口设计到FastAPI项目骨架搭建、核心业务接口实现、认证与错误处理、自动化测试与文档生成，并输出部署与联调指南（不涉及其他层级如数据库/采集层的联通）。

### 核心目标
1. **接口设计与规范确定（周一优先）**：完成核心功能的RESTful接口列表、请求/响应模型与错误码规范。
2. **FastAPI项目搭建（周二）**：完成项目结构、依赖管理、开发服务器与基础路由。
3. **核心接口实现（周三）**：故障上报、故障列表查询、告警确认、自动恢复触发等接口实现（以内存仓储完成最小闭环）。
4. **认证与中间件（周四）**：JWT认证、CORS、统一日志与全局异常处理。
5. **测试与文档（周五）**：Pytest单元与集成测试、OpenAPI文档完善与版本化。
6. **性能与部署（周六）**：基础性能配置、部署与联调指南、配置管理。
7. **实践项目与复盘（周日）**：联调与演示、问题清单与下周规划。

### 质量目标
- 接口遵循REST规范，模型与状态码统一，错误处理一致。
- 测试覆盖核心路径，接口可集成到前端或外部调用方。
- 文档与部署指南清晰，具备最小可上线能力（dev环境）。

---

## 周一（2025-11-10）
**主题：接口设计与规范**

### 20:00-21:30：接口列表与数据模型
- **任务**：梳理核心功能接口（故障上报/查询/确认/恢复触发/健康检查），定义请求/响应模型与错误码。
- **要求**：遵循REST命名规范、幂等性原则，明确分页/过滤参数与统一响应结构。
- **产出**：接口设计文档初版（含端点列表、参数、响应示例与错误码约定）。

### 21:30-22:00：评审与确认
- **任务**：与团队快速评审接口，确认字段与状态流转（结合数据字典与ER）。
- **产出**：确定版接口列表与规范说明。

---

## 周二（2025-11-11）
**主题：FastAPI项目骨架搭建**

### 20:00-21:00：环境与结构
- **学习任务**：创建项目结构（`app/routers`, `app/models`, `app/schemas`, `app/services`, `app/core`），配置`requirements.txt`，启动`uvicorn`开发服务。
- **产出**：FastAPI最小项目与基础健康检查路由（`GET /health`）。

### 21:00-22:00：Pydantic与基础路由
- **学习任务**：编写Pydantic模型（故障、告警确认），实现基础路由与响应模型校验。
- **产出**：基础实体Schema与示例路由（不含复杂逻辑）。

---

## 周三（2025-11-12）
**主题：核心接口与内存仓储闭环**

### 20:00-21:00：核心接口实现
- **学习任务**：实现关键接口：
- `POST /faults` 故障上报（接收前端或外部数据源）
  - `GET /faults` 列表查询（分页、过滤）
  - `POST /faults/{id}/ack` 告警确认
  - `POST /faults/{id}/recover` 自动恢复触发
- **产出**：可运行的核心接口（内存或简化存储）。

### 21:00-22:00：内存存储与仓储抽象
- **学习任务**：设计内存仓储（Repository）与接口抽象，模拟持久化层；确保接口幂等与状态一致性，并为后续数据库接入预留扩展点。
- **产出**：内存存储实现、仓储接口与配置占位（不接入数据库）。

---

## 周四（2025-11-13）
**主题：认证、CORS与错误处理**

### 20:00-21:00：JWT认证与CORS
- **学习任务**：实现基础JWT登录/校验流程，配置CORS以允许前端访问；统一请求上下文。
- **产出**：`/auth/login` 端点、Token校验中间件与CORS设置。

### 21:00-22:00：统一日志与异常处理
- **学习任务**：设计全局异常处理与统一响应格式，记录接口访问日志与错误堆栈。
- **产出**：异常处理器、中间件日志与错误响应规范。

---

## 周五（2025-11-14）
**主题：测试与文档**

### 20:00-21:00：Pytest与集成测试
- **学习任务**：编写服务层与路由的单元测试；使用FastAPI `TestClient`完成接口集成测试（含认证）。
- **产出**：测试用例与覆盖率报告（核心路径）。

### 21:00-22:00：OpenAPI与版本化
- **学习任务**：完善接口注解，生成OpenAPI文档；规划`/v1`版本路径或标签。
- **产出**：自动文档（`/docs`/`/redoc`）与OpenAPI导出文件。

---

## 周六（2025-11-15）
**主题：性能与部署**

### 20:00-21:00：性能与配置
- **学习任务**：基础性能优化（Uvicorn/Workers、连接池、超时与重试、限流策略草案）。
- **产出**：性能参数与配置说明，基础压测方案。

### 21:00-22:00：部署与联调指南
- **学习任务**：输出部署与联调文档（环境变量、依赖、启动命令、对接前端的数据路径）。
- **产出**：部署与联调指南初稿。

---

## 周日（2025-11-16）
**主题：实践演示与复盘**

### 20:00-21:30：联调演示
- **任务**：完成核心接口联调与演示（健康检查、上报、查询、确认、恢复触发）。
- **产出**：可运行的API演示与测试报告（截图/日志）。

### 21:30-22:00：复盘与下周计划
- **任务**：总结本周产出与问题，规划下周（进一步完善接口、权限细化、监控与告警接入）。
- **产出**：周报与下周初步计划。

---

## 风险评估与应对策略
- **内存存储一致性与并发安全风险**：并发更新导致状态不一致。应对：使用线程安全数据结构、接口级幂等控制与乐观校验；后续引入持久化方案。
- **认证与权限复杂度**：JWT与角色权限初次实现。应对：本周先最小闭环，细化到角色权限下周推进。
- **时间管理风险**：学习与实现并行。应对：优先核心接口与测试，文档与优化滚动推进。

## 学习资源与参考资料
- FastAPI 官方文档：https://fastapi.tiangolo.com/
- Pydantic 文档：https://docs.pydantic.dev/latest/
- Uvicorn 文档：https://www.uvicorn.org/
- Pytest 文档：https://docs.pytest.org/en/stable/
- HTTPX 文档：https://www.python-httpx.org/
- OpenAPI 规范与工具：https://swagger.io/specification/
- 团队《接口约定草案》（若有最新版本用于字段与错误码对齐）

## 预期成果与交付物

### 主要交付物
| 类别 | 交付物 | 具体内容 |
|------|--------|----------|
| **接口设计** | REST接口列表与规范 | 端点、方法、参数、响应模型、错误码；版本策略 |
| **后端项目** | FastAPI项目骨架 | 目录结构、基础路由、配置与环境脚本 |
| **核心接口** | 故障相关API | 上报/查询/确认/恢复触发；以内存存储实现最小闭环 |
| **认证与中间件** | JWT、CORS、异常处理 | 登录端点、Token校验、统一日志与错误响应 |
| **测试与文档** | 测试与OpenAPI文档 | Pytest用例、覆盖率、自动文档导出与使用说明 |
| **部署与联调** | 部署与联调指南 | 启动命令、环境变量、依赖、联调步骤与注意事项（对接前端） |

### 质量标准
- 接口一致性与幂等性，错误码与响应结构统一。
- 测试覆盖核心路径，关键接口具备集成测试。
- 文档与指南完整、可落地到开发环境。

---
**计划制定时间**: 2025-11-10 
**计划执行周期**: 2025-11-10 至 2025-11-16  
**下周重点**: 细化权限与角色、完善监控与告警、扩展更多业务接口  
**个人目标**: 完成从接口设计到后端实现与测试文档的闭环，具备可演示与联调能力。
