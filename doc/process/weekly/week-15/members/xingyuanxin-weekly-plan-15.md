# 邢远鑫第 15 周个人周计划（详细版）

**周期**：2025-12-29 至 2025-01-04
**姓名**：邢远鑫
**核心目标**：完成核心业务模块的前后端深度联调，优化全局交互体验，确保系统进入准生产状态。

---

## 一、 本周工作任务清单

### 1. 已完成工作（12/29 - 12/30）

#### **AI 核心功能增强**

- **AI 诊断流式输出 (SSE)**：
  - **后端实现**：在 `backend/app/routers/ai.py` 中引入 `StreamingResponse`，通过 SSE 协议实现 AI 推理结果的逐字输出，解决长文本生成时的界面卡顿问题。
  - **前端适配**：重构 `Diagnosis.vue` 中的对话逻辑，利用 `fetch` 的 `ReadableStream` 实时解析数据流，并增加流式打字机效果。
  - **故障诊断优化**：在 `Diagnosis.vue` 中优化了诊断面板的 UI 布局，增加了错误状态的友好提示。
- **AI 搜索修复**：修复了 AI 联网搜索功能在处理集群与节点数据时的模型映射错误（涉及 `backend/app/models/clusters.py` 和 `nodes.py`）。

#### **集群管理模块重构**

- **字段扩展与校验**：
  - 后端 `backend/app/routers/clusters.py` 新增 `description` 描述字段，并修复了注册过程中可能导致的 500 内部服务器错误。
  - 前端 `ClusterList.vue` 完成对齐，支持集群描述信息的展示与编辑。
- **状态显示优化**：改进了集群健康状态的实时刷新逻辑，增加了 NameNode/ResourceManager 等核心组件的探针状态回显。

#### **全局 UI/UX 深度重构**

- **基础架构调整**：
  - **App.vue/Sidebar/Header**：对系统主框架进行了大规模重构，优化了侧边栏的折叠逻辑（Collapse）以及顶部导航的动态面包屑显示。
  - **认证流优化**：重写了 `Login.vue` 和 `Register.vue`，实现了更平滑的登录跳转动画，并支持在登录页自动隐藏侧边栏和顶部导航。
- **响应式适配**：初步统一了全局页面的 `Container` 宽度和 `Padding` 规范，提升了在不同分辨率下的视觉一致性。

#### **技术文档与联调指南**

- 产出了多份针对性极强的技术文档，以便团队协作：
  - `AI诊断流式输出联调指南.md`：详细说明了 SSE 协议对接细节。
  - `集群注册描述后端联调指南.md`：规范了集群信息的 CRUD 接口变更。
  - `AI工具后端联调指南.md`：定义了 AI 插件能力的调用标准。

---

### 2. 计划中工作（12/31 - 01/04）

#### **重点联调任务（后端对接）**

- **执行日志模块 (ExecLogs.vue)**：
  - 完成与 `backend/app/routers/hadoop_logs.py` 的深度对接。
  - 实现日志的实时滚动刷新（Tail 效果）以及按作业 ID 的精准过滤。
- **审计日志与日志查询**：
  - 优化 `AuditLogs.vue`，实现操作人、操作类型、影响范围等多维度的联通查询。
  - 将查询条件的输入框全部替换为基于后端字典的 `Select` 下拉选择，减少无效查询。
- **告警与账号管理**：
  - 对接告警规则的动态启停接口，确保前端状态与后端任务实时同步。
  - 完成用户角色权限在侧边栏菜单的动态过滤逻辑。

#### **全局交互与性能优化**

- **统一错误捕获**：在 `Axios` 拦截器中增加对 401、403、500 等状态码的 UI 级统一反馈处理。
- **加载状态闭环**：为所有联调模块增加 Skeleton（骨架屏）或统一的 Loading 效果，消除数据加载时的视觉突跳。

---

## 二、 每日工作安排

| 日期             | 目标任务               | 具体细节                                                                       |
| :--------------- | :--------------------- | :----------------------------------------------------------------------------- |
| **12/29 (周一)** | **AI 与集群基础联调**  | 完成 SSE 流式输出开发；修复 AI 搜索模型字段映射 Bug；新增集群描述字段。        |
| **12/30 (周二)** | **UI 架构重构与文档**  | 完成 App.vue/Login.vue 大规模重构；编写 3 份核心联调指南；恢复并整理历史文档。 |
| **12/31 (周三)** | **日志系统深度联调**   | 对接 ExecLogs 与 AuditLogs；实现日志的流式展示与多维过滤；修复分页跳转逻辑。   |
| **01/01 (周四)** | **元旦假期/自主优化**  | 关键代码 Review；优化 CSS 变量命名规范；进行系统可用性小范围自测。             |
| **01/02 (周五)** | **告警与权限模块联调** | 完成告警配置 CRUD 对接；实现侧边栏菜单的角色驱动显示逻辑。                     |
| **01/03 (周六)** | **全局 UI 走查与适配** | 统一全局边距、圆角与阴影规范；完成主流分辨率（1366-1920）的响应式走查。        |
| **01/04 (周日)** | **总结与下周规划**     | 整理联调成果演示 Demo；更新技术债清单；产出第 15 周工作总结。                  |

---

## 三、 预期产出物

1.  **功能模块**：执行日志、告警配置、审计日志、账号管理四个模块达到“联调完成”状态，且具备完善的错误处理。
2.  **UI 效果**：系统整体布局达到“像素级”一致，交互动画自然顺畅，支持暗黑/明亮模式切换（可选）。
3.  **技术文档**：更新联调过程中发现的接口变更，形成最终版的《前端联调验收手册》。

---

**邢远鑫**
**2025 年 12 月 30 日**
