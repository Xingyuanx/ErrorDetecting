# 第十一周个人周计划
**核心目标**：系统学习FastAPI核心特性与开发流程，掌握接口设计、数据校验、数据库集成、并发配置等关键技能，完成基础开发环境搭建与小型实战验证，为后续日志接收、集群状态查询、大模型通信等接口开发奠定基础
**前置准备**：Python 3.8+环境、FastAPI官方文档、uvicorn（ASGI服务器）、Pydantic（数据校验库）、MySQL/Redis Python客户端（mysql-connector-python/redis）、PyHive/ subprocess（Hadoop通信依赖）、Postman（接口测试工具）、代码编辑器（VS Code）、接口开发规范文档

## 周日：FastAPI基础认知与开发环境搭建
- 1. 核心特性学习：研读FastAPI官方文档，梳理核心优势（高性能、自动生成接口文档、类型提示支持、数据校验内置），对比传统Web框架（如Flask）的差异，明确技术选型适配场景
- 2. 开发环境搭建：通过pip安装依赖包（pip install fastapi uvicorn mysql-connector-python redis PyHive requests），验证环境可用性（执行简单Python脚本测试库导入）
- 3. 第一个FastAPI应用：创建主程序文件（main.py），编写Hello World接口（GET /api/hello），配置uvicorn启动命令（uvicorn main:app --reload），访问本地服务验证接口响应
- 4. 项目结构规划：设计后续接口开发的目录结构（如api/（接口模块）、utils/（工具函数）、config/（配置文件）、models/（数据模型）），明确各目录职责

## 周一：FastAPI核心语法与请求参数处理
- 1. 路径与查询参数学习：掌握路径参数（固定路径/动态路径）、查询参数（必填/可选/默认值）的定义方式，编写示例接口（如GET /api/cluster/{node_id}），测试参数传递与解析
- 2. 请求体与数据校验：使用Pydantic定义数据模型（Model），学习字段类型约束（str/int/datetime）、必填项设置、默认值配置，实现请求数据自动校验与错误提示
- 3. 复杂参数组合：开发包含路径参数+查询参数+请求体的复合接口，测试多类型参数协同解析逻辑，验证数据校验的准确性（如非法数据输入时的错误响应格式）
- 4. 类型提示实践：强化Python类型提示使用规范，确保接口参数、返回值、函数变量均添加类型标注，提升代码可读性与可维护性

## 周二：接口开发入门与响应格式化
- 1. 基础接口开发：分别实现GET（查询）、POST（提交）类型接口示例，模拟集群状态查询（GET /api/cluster/status）、简单日志接收（POST /api/log/test-upload）接口逻辑
- 2. 响应模型定义：使用Pydantic定义响应模型（Response Model），规范接口返回格式（统一包含code、msg、data字段），支持响应数据过滤与字段重命名
- 3. 错误处理机制：学习FastAPI异常处理方式，自定义HTTPException（如404节点不存在、400参数错误），配置全局异常捕获中间件，确保错误响应一致性
- 4. 接口测试验证：使用Postman发送不同类型请求（GET/POST），验证接口响应正确性、数据校验有效性、错误提示清晰度，记录接口响应耗时

## 周三：数据交互与数据库基础集成
- 1. MySQL连接配置：编写数据库连接工具类，封装MySQL连接参数（主机、端口、用户名、密码、数据库名），实现连接池复用，避免频繁创建连接
- 2. 基础CRUD操作：基于mysql-connector-python实现数据增删改查（CRUD）函数，以“故障记录”为例，开发保存故障信息（save_fault_to_mysql）、查询故障列表的工具函数，验证数据读写一致性
- 3. Redis缓存集成：学习Redis客户端使用，封装缓存操作函数（set/get集群状态缓存、过期时间设置），实现get_cluster_status_from_redis工具函数，为后续集群状态接口缓存优化做准备
- 4. 数据交互安全性：学习数据库连接参数加密存储（避免明文硬编码），添加异常捕获机制（处理数据库连接失败、查询超时等场景）

## 周四：FastAPI高级特性与并发配置
- 1. 依赖注入学习：掌握FastAPI依赖注入机制，实现可复用依赖（如数据库连接依赖、权限校验依赖），简化接口代码冗余
- 2. 中间件与请求拦截：开发基础中间件，实现请求日志记录（记录请求路径、方法、耗时）、跨域请求支持（CORS中间件配置），增强服务可观测性
- 3. 并发性能优化：学习uvicorn启动参数配置，测试不同workers数量（--workers 4）对并发请求的支持效果，验证服务在多请求场景下的稳定性
- 4. 自动接口文档使用：熟悉FastAPI自动生成的接口文档（/docs与/redoc），学习通过文档直接测试接口，理解文档与代码注释的关联逻辑（如字段描述、接口说明）

## 周五：工具通信适配入门（Hadoop/大模型）
- 1. Hadoop命令调用：学习subprocess模块使用，封装Hadoop命令执行函数（如调用hdfs dfs -du -h / 查看HDFS目录大小），处理命令输出结果格式化（字符串转字典/列表）
- 2. PyHive基础连接：配置PyHive依赖环境，实现Hive数据库连接测试，编写简单查询函数（如查询Hive中日志表的基础统计信息），验证与Hadoop生态的通信可行性
- 3. 大模型API通信模拟：封装HTTP请求函数，模拟调用大模型API的流程（POST请求携带结构化数据、接收诊断结果），学习请求头设置、超时控制、响应解析
- 4. 通信异常处理：添加网络波动、服务不可用等场景的异常捕获，实现重试机制（简单重试逻辑），确保工具通信的可靠性

## 周六：综合实战与知识梳理规划
- 1. 小型实战项目：开发简易日志接收与查询系统，包含3个核心接口（POST /api/log/upload 接收日志、GET /api/log/list 查询日志列表、GET /api/cluster/status 缓存集群状态），集成数据校验、数据库存储、Redis缓存功能
- 2. 功能验证与优化：使用Postman批量测试接口，验证数据存储完整性、缓存生效情况、并发请求稳定性，排查并修复参数校验不严谨、响应延迟等问题
- 3. 知识梳理归档：整理学习笔记（核心语法、接口开发流程、数据库集成步骤、故障排查方案），归档示例代码与配置文件，编写接口开发规范（参数命名、响应格式、错误码定义）
- 4. 后续开发规划：结合第十周日志采集需求，明确后续接口开发优先级（日志接收接口→集群状态接口→大模型通信接口），梳理待补充的技术点（日志结构化处理、高并发优化、权限控制）