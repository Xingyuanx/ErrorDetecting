# 第十一周周总结（沈永佳）

## 本周完成
- 数据库联调与网络：完成 `postgresql.conf` 的监听地址配置与 `pg_hba.conf` 的局域网访问策略设置，解决局域网连接问题；开放 `5432` 端口并验证连通性。
- 初始化与测试数据：执行 `doc/project/数据库建表脚本_postgres.sql`，创建核心表与初始数据；补充测试用户，支持登录/注册联调。
- 后端对接：在 `backend/.env` 配置数据库连接，完成接口端到端联调；更新后端启动文档与命令，提升跨环境可用性。
- 前端联调：完成登录/注册流程联调，成功获取并携带 `Bearer` 令牌访问受限接口。

## 细节与参考
- 配置与启动：
  - 数据库连接读取与默认值：`backend/app/config.py:6-21`
  - 启动命令（模块方式）：`backend/README.md:73-92`
- 接口联调：
  - 登录接口：`backend/app/routers/auth.py:25-50`
  - 注册接口与校验：`backend/app/routers/auth.py:53-93`
  - 前端注册与错误解析：`frontend-vue/src/app/stores/auth.ts:58-75`
- 联调验证：健康检查、注册、登录、携令牌访问当前用户均通过（参考 README 中 curl 示例）。

## 问题与解决
- 问题：后端在局域网下无法访问数据库，表现为连接超时或认证失败。
- 原因：数据库未监听局域网地址；`pg_hba.conf` 未放行对应网段；防火墙端口未开放。
- 解决：
  - 设置 `listen_addresses='*'` 或指定局域网地址；
  - 在 `pg_hba.conf` 中添加 `host    all    all    192.168.43.0/24    scram-sha-256`；
  - 开放 `5432` 端口并校验防火墙策略；
  - 在后端 `.env` 设置正确的 `DATABASE_URL` 并验证连接。

## 下周计划
- 扩展联调用例与失败场景覆盖，完善日志与告警策略。
- 补齐 CI/CD 流水线的构建/测试/推送阶段，提升交付效率与质量保障。
- 增强可观测性，接入基础监控与看板，沉淀压测基线数据。

## 结论
- 本周完成数据库与后端的联通修复，端到端联调恢复正常；后端文档与启动命令优化提升了跨环境可用性。后续将围绕联调覆盖、流水线与观测能力持续完善。
