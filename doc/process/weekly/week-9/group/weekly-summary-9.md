# 第九周团队周总结

## 总体进展
- 认证与联调：完成 JWT 认证方案试验，打通登录/注册返回令牌的端到端链路（接口与前端对接验证已初步通过）。
- 容器与部署：完成后端容器化最小闭环（镜像→Compose→K8s），并对探针、重启策略与资源配额进行基础验证，形成规范草案。
- Hadoop与数据采集：完成 HDFS 存储配置优化与验证；Flume 部署与日志采集到 HDFS 的整条链路测试通过，记录性能与问题清单。
- 运维与测试：掌握 Hadoop 集群日常操作，完成 HDFS/MapReduce 基础功能实践；启动自动化测试与集群对接的初步尝试。

## 关键成果
- JWT：令牌生成、过期校验与请求携带流程验证完成，前后端联通性良好（联调受 DB 配置影响，详见“问题与风险”）。
- 容器化：完成后端多阶段镜像优化、本地 Compose 编排与 K8s 最小部署（含 Readiness/Liveness），建立部署与故障注入演示。
- HDFS：核心参数优化（副本数、块大小、读写线程等）生效并带来 IO 性能提升约 20%，完成基础压测与故障恢复验证。
- Flume：按时间分区写入 HDFS 的采集方案稳定运行，完成容量与批量参数调优、权限与路径等问题修复，形成启动/停止脚本。
- 文档与规范：输出容器化规范草案与操作手册、HDFS/Flume 配置与测试报告，便于后续复用与协作。
- 前端接口封装与对接：统一 Header、响应与错误处理、幂等接口退避重试；产出 Postman 集合与环境，完成 Auth/Cluster/Logs 基础对接与用户提示策略。

## 问题与风险
- 数据库联调阻塞：由于数据库初始化与远程访问配置不充分，后端在联调阶段无法稳定访问数据库，影响部分接口测试。
  - 可能原因：环境变量与连接串未完全就绪，`pg_hba.conf` 与 `listen_addresses` 未按联调网段放开，或账户权限不足。
- CI/CD 未完善：构建/测试/推送流水线仅有框架，尚未落地完整流程，影响交付节奏与质量保障。
- 观测能力不足：未接入 Prometheus/Grafana 等监控与告警，缺少压力与指标数据支撑调优决策。
 - 接口错误码与字段对齐：部分接口的错误码与字段口径仍需统一，封装层需继续对齐转译策略。
 - Metrics 实时联调未完成：SSE/WS 连接稳定性与断线重连策略待完善，需补充心跳与状态提示。
 - Logs 下载权限：下载接口的权限校验链路未完全打通，需与后端统一校验流程。

## 下周计划
- 数据库打通：导入建表脚本、完善账户与权限，统一设置 `DATABASE_URL` 或分项变量；校验远程访问策略，完成后端到 DB 的稳定连接。
- 联调回归：恢复并扩展接口联调用例，补充异常与失败场景日志；完善后端启动与联调文档细节与问题排查流程。
- CI/CD：补齐构建/测试/推送阶段，接入镜像仓库与分支策略；针对后端与前端分别建立最小流水线闭环。
- K8s与性能：丰富探针与发布策略，进行限流与滚更参数化；补充压力测试与数据采集，沉淀可观测看板与阈值。
- 数据侧深化：继续推进 HDFS 高级功能（快照/一致性验证）与 MapReduce 自定义程序测试，完善自动化测试脚本与数据管理策略。
 - 前端联调完善：完成 Metrics 实时联调与性能优化（SSE/WS），完善断线重连与心跳策略；打通 Logs 下载权限流程并补充边界场景。
 - 接口口径统一：与后端对齐错误码与字段规范，补充封装层单元测试，提升稳定性与一致性。

## 协作与改进
- 环境统一：对齐数据库与容器环境变量命名与默认值，整理联调网络与访问策略，减少环境差异导致的问题。
- 文档强化：以失败案例与截图为主，补充部署/联调/排障手册，形成常见故障库与对策清单。
- 数据驱动：以压测与观测数据为依据推进调优；在关键改动（参数/策略）后进行对比验证并留存证据。

## 结论
- 团队在认证、容器化与数据采集三条主线均取得阶段性成果，具备从开发到部署的最小可运行闭环。
- 目前的主要风险在于数据库联调未打通与 CI/CD 未完善。下周将以“打通数据库连接、完善流水线与观测”为重点，确保端到端联调稳定与交付能力提升。
