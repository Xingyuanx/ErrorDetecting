<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg" style="background-color: white;">
  <defs>
    <style>
      .title { font-family: 'Microsoft YaHei', sans-serif; font-size: 24px; font-weight: bold; text-anchor: middle; }
      .actor-text { font-family: 'Microsoft YaHei', sans-serif; font-size: 14px; text-anchor: middle; }
      .usecase-text { font-family: 'Microsoft YaHei', sans-serif; font-size: 12px; text-anchor: middle; }
      .system-title { font-family: 'Microsoft YaHei', sans-serif; font-size: 16px; font-weight: bold; }
      .include-text { font-family: 'Microsoft YaHei', sans-serif; font-size: 10px; text-anchor: middle; }
      .actor { fill: #FFE0B2; stroke: #FF9800; stroke-width: 2; }
      .usecase { fill: #E3F2FD; stroke: #1976D2; stroke-width: 2; }
      .system-boundary { fill: none; stroke: #666666; stroke-width: 2; stroke-dasharray: 5,5; }
      .association { stroke: #333333; stroke-width: 2; fill: none; }
      .include { stroke: #666666; stroke-width: 1; fill: none; stroke-dasharray: 3,3; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666666" />
    </marker>
  </defs>

  <!-- 标题 -->
  <text x="600" y="30" class="title">故障检测系统 - 用例图</text>

  <!-- 系统边界 -->
  <rect x="300" y="80" width="800" height="650" class="system-boundary" />
  <text x="320" y="100" class="system-title">故障检测系统</text>

  <!-- 参与者 -->
  <!-- 前端用户 -->
  <g id="user">
    <ellipse cx="150" cy="200" rx="40" ry="20" class="actor" />
    <line x1="150" y1="220" x2="150" y2="260" stroke="#FF9800" stroke-width="2" />
    <line x1="130" y1="240" x2="170" y2="240" stroke="#FF9800" stroke-width="2" />
    <line x1="150" y1="260" x2="130" y2="290" stroke="#FF9800" stroke-width="2" />
    <line x1="150" y1="260" x2="170" y2="290" stroke="#FF9800" stroke-width="2" />
    <text x="150" y="320" class="actor-text">前端用户</text>
  </g>

  <!-- 运维工程师 -->
  <g id="ops">
    <ellipse cx="150" cy="450" rx="40" ry="20" class="actor" />
    <line x1="150" y1="470" x2="150" y2="510" stroke="#FF9800" stroke-width="2" />
    <line x1="130" y1="490" x2="170" y2="490" stroke="#FF9800" stroke-width="2" />
    <line x1="150" y1="510" x2="130" y2="540" stroke="#FF9800" stroke-width="2" />
    <line x1="150" y1="510" x2="170" y2="540" stroke="#FF9800" stroke-width="2" />
    <text x="150" y="570" class="actor-text">运维工程师</text>
  </g>

  <!-- 测试工程师 -->
  <g id="qa">
    <ellipse cx="150" cy="650" rx="40" ry="20" class="actor" />
    <line x1="150" y1="670" x2="150" y2="710" stroke="#FF9800" stroke-width="2" />
    <line x1="130" y1="690" x2="170" y2="690" stroke="#FF9800" stroke-width="2" />
    <line x1="150" y1="710" x2="130" y2="740" stroke="#FF9800" stroke-width="2" />
    <line x1="150" y1="710" x2="170" y2="740" stroke="#FF9800" stroke-width="2" />
    <text x="150" y="770" class="actor-text">测试工程师</text>
  </g>

  <!-- 用例 -->
  <!-- 第一行用例 -->
  <ellipse cx="450" cy="150" rx="80" ry="30" class="usecase" />
  <text x="450" y="155" class="usecase-text">查看集群状态</text>

  <ellipse cx="650" cy="150" rx="60" ry="30" class="usecase" />
  <text x="650" y="155" class="usecase-text">查询日志</text>

  <ellipse cx="850" cy="150" rx="80" ry="30" class="usecase" />
  <text x="850" y="155" class="usecase-text">发起故障诊断</text>

  <!-- 第二行用例 -->
  <ellipse cx="450" cy="250" rx="80" ry="30" class="usecase" />
  <text x="450" y="255" class="usecase-text">执行自动修复</text>

  <ellipse cx="650" cy="250" rx="80" ry="30" class="usecase" />
  <text x="650" y="255" class="usecase-text">查看执行日志</text>

  <ellipse cx="850" cy="250" rx="80" ry="30" class="usecase" />
  <text x="850" y="255" class="usecase-text">配置Flume收集</text>

  <!-- 第三行用例 -->
  <ellipse cx="450" cy="350" rx="80" ry="30" class="usecase" />
  <text x="450" y="355" class="usecase-text">配置告警阈值</text>

  <ellipse cx="650" cy="350" rx="100" ry="30" class="usecase" />
  <text x="650" y="350" class="usecase-text">导出故障与</text>
  <text x="650" y="365" class="usecase-text">诊断报告</text>

  <!-- 第四行用例（包含关系） -->
  <ellipse cx="950" cy="400" rx="80" ry="30" class="usecase" />
  <text x="950" y="405" class="usecase-text">生成FixCommand</text>

  <ellipse cx="950" cy="500" rx="80" ry="30" class="usecase" />
  <text x="950" y="505" class="usecase-text">命令安全校验</text>

  <!-- 关联关系 -->
  <!-- 前端用户的关联 -->
  <line x1="190" y1="200" x2="370" y2="150" class="association" />
  <line x1="190" y1="220" x2="590" y2="150" class="association" />
  <line x1="190" y1="240" x2="770" y2="150" class="association" />
  <line x1="190" y1="260" x2="370" y2="250" class="association" />
  <line x1="190" y1="280" x2="570" y2="250" class="association" />

  <!-- 运维工程师的关联 -->
  <line x1="190" y1="430" x2="770" y2="250" class="association" />
  <line x1="190" y1="450" x2="370" y2="350" class="association" />
  <line x1="190" y1="470" x2="370" y2="250" class="association" />
  <line x1="190" y1="490" x2="370" y2="150" class="association" />

  <!-- 测试工程师的关联 -->
  <line x1="190" y1="650" x2="590" y2="150" class="association" />
  <line x1="190" y1="670" x2="550" y2="350" class="association" />

  <!-- 包含关系 -->
  <line x1="850" y1="180" x2="920" y2="380" class="include" />
  <text x="885" y="280" class="include-text">《include》</text>

  <line x1="450" y1="280" x2="920" y2="480" class="include" />
  <text x="685" y="380" class="include-text">《include》</text>

  <!-- 说明文字 -->
  <g id="legend">
    <rect x="50" y="50" width="200" height="120" fill="#F5F5F5" stroke="#CCCCCC" stroke-width="1" />
    <text x="60" y="70" class="usecase-text" font-weight="bold">图例说明：</text>
    <line x1="70" y1="85" x2="120" y2="85" class="association" />
    <text x="130" y="90" class="include-text">关联关系</text>
    <line x1="70" y1="105" x2="120" y2="105" class="include" />
    <text x="130" y="110" class="include-text">包含关系</text>
    <ellipse cx="95" cy="130" rx="20" ry="10" class="usecase" />
    <text x="130" y="135" class="include-text">用例</text>
    <ellipse cx="95" cy="150" rx="15" ry="8" class="actor" />
    <text x="130" y="155" class="include-text">参与者</text>
  </g>

  <!-- 用例描述 -->
  <g id="description">
    <rect x="350" y="550" width="800" height="150" fill="#F5F5F5" stroke="#CCCCCC" stroke-width="1" />
    <text x="360" y="570" class="usecase-text" font-weight="bold">主要用例说明：</text>
    <text x="370" y="590" class="include-text">• 前端用户：主要通过Web界面进行日志查询、故障诊断和修复操作</text>
    <text x="370" y="610" class="include-text">• 运维工程师：负责系统配置、告警设置和高级修复操作</text>
    <text x="370" y="630" class="include-text">• 测试工程师：主要进行日志分析和报告导出</text>
    <text x="370" y="650" class="include-text">• 故障诊断包含生成FixCommand，自动修复包含命令安全校验</text>
    <text x="370" y="670" class="include-text">• 系统支持多角色协作，确保故障处理的安全性和有效性</text>
  </g>
</svg>